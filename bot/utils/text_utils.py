"""Text utilities for multilingual support"""


def detect_script(text: str) -> str:
    """
    Detect if text is in latin or cyrillic script
    Returns: 'latin' or 'cyrillic'
    """
    if not text:
        return "latin"
    
    cyrillic_chars = sum(1 for char in text if '\u0400' <= char <= '\u04FF')
    latin_chars = sum(1 for char in text if 'a' <= char.lower() <= 'z')
    
    return "cyrillic" if cyrillic_chars > latin_chars else "latin"


def convert_to_uzbek_script(text: str, target_script: str) -> str:
    """
    Convert Uzbek text between Latin and Cyrillic scripts.
    
    Args:
        text: Input text
        target_script: 'latin' or 'cyrillic'
    
    Returns:
        Converted text
    """
    if not text:
        return text
    
    # Mapping Latin to Cyrillic
    latin_to_cyr = {
        # Uppercase singles
        'A': '–ê', 'B': '–ë', 'D': '–î', 'E': '–ï', 'F': '–§', 'G': '–ì', 'H': '“≤',
        'I': '–ò', 'J': '–ñ', 'K': '–ö', 'L': '–õ', 'M': '–ú', 'N': '–ù', 'O': '–û',
        'P': '–ü', 'Q': '“ö', 'R': '–†', 'S': '–°', 'T': '–¢', 'U': '–£', 'V': '–í',
        'X': '–•', 'Y': '–ô', 'Z': '–ó',
        # Uppercase specials (len=2)
        "O'": '–é', "G'": '“í', 'Sh': '–®', 'Ch': '–ß', 'Ng': '–ù–≥',
        # Lowercase singles
        'a': '–∞', 'b': '–±', 'd': '–¥', 'e': '–µ', 'f': '—Ñ', 'g': '–≥', 'h': '“≥',
        'i': '–∏', 'j': '–∂', 'k': '–∫', 'l': '–ª', 'm': '–º', 'n': '–Ω', 'o': '–æ',
        'p': '–ø', 'q': '“õ', 'r': '—Ä', 's': '—Å', 't': '—Ç', 'u': '—É', 'v': '–≤',
        'x': '—Ö', 'y': '–π', 'z': '–∑',
        # Lowercase specials (len=2)
        "o'": '—û', "g'": '“ì', 'sh': '—à', 'ch': '—á', 'ng': '–Ω–≥',
        # Apostrophe
        " º": '—ä', "'": '—ä'
    }
    
    # Mapping Cyrillic to Latin
    cyr_to_latin = {v: k for k, v in latin_to_cyr.items()}
    
    current_script = detect_script(text)
    if current_script == target_script:
        return text
    
    # Convert
    if target_script == "cyrillic":
        mapping = latin_to_cyr
        for lat, cyr_char in sorted(mapping.items(), key=lambda x: len(x[0]), reverse=True):
            text = text.replace(lat, cyr_char)
    else:  # latin
        mapping = cyr_to_latin
        for cyr_char, lat in sorted(mapping.items(), key=lambda x: len(x[0]), reverse=True):
            text = text.replace(cyr_char, lat)
    
    return text


TEXTS = {
    "welcome": {
        "latin": """Assalomu alaykum{user_name}!

ü§ñ Men Uznetix Advisor botiman. Sizga O'zbekistonda investitsiya qilishda yordam beraman.

Men sizga:
‚úÖ Maqsadlaringizga mos investitsiya g'oyalarini topaman
‚úÖ Aksiyalar, ETF va boshqa vositalarni tavsiya qilaman  
‚úÖ Oddiy va tushunarli tilda tushuntiraman
‚úÖ Risklar haqida ogohlantiraman""",
        "cyrillic": """–ê—Å—Å–∞–ª–æ–º—É –∞–ª–∞–π–∫—É–º{user_name}!

ü§ñ –ú–µ–Ω Uznetix Advisor –±–æ—Ç–∏–º–∞–Ω. –°–∏–∑–≥–∞ –é–∑–±–µ–∫–∏—Å—Ç–æ–Ω–¥–∞ –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏—è “õ–∏–ª–∏—à–¥–∞ —ë—Ä–¥–∞–º –±–µ—Ä–∞–º–∞–Ω.

–ú–µ–Ω —Å–∏–∑–≥–∞:
‚úÖ –ú–∞“õ—Å–∞–¥–ª–∞—Ä–∏–Ω–≥–∏–∑–≥–∞ –º–æ—Å –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏—è “ì–æ—è–ª–∞—Ä–∏–Ω–∏ —Ç–æ–ø–∞–º–∞–Ω
‚úÖ –ê–∫—Ü–∏—è–ª–∞—Ä, ETF –≤–∞ –±–æ—à“õ–∞ –≤–æ—Å–∏—Ç–∞–ª–∞—Ä–Ω–∏ —Ç–∞–≤—Å–∏—è “õ–∏–ª–∞–º–∞–Ω  
‚úÖ –û–¥–¥–∏–π –≤–∞ —Ç—É—à—É–Ω–∞—Ä–ª–∏ —Ç–∏–ª–¥–∞ —Ç—É—à—É–Ω—Ç–∏—Ä–∞–º–∞–Ω
‚úÖ –†–∏—Å–∫–ª–∞—Ä “≥–∞“õ–∏–¥–∞ –æ–≥–æ“≥–ª–∞–Ω—Ç–∏—Ä–∞–º–∞–Ω"""
    },
    "welcome_uznetix": {
        "latin": """Assalomu alaykum{user_name}!

ü§ñ Uznetix Advisor botiga xush kelibsiz! Men sizga O'zbekiston bozoridagi eng yaxshi investitsiya imkoniyatlarini topishda yordam beraman.
""",
        "cyrillic": """–ê—Å—Å–∞–ª–æ–º—É –∞–ª–∞–π–∫—É–º{user_name}!

ü§ñ Uznetix Advisor –±–æ—Ç–≥–∞ —Ö—É—à –∫–µ–ª–∏–±—Å–∏–∑! –ú–µ–Ω —Å–∏–∑–≥–∞ –é–∑–±–µ–∫–∏—Å—Ç–æ–Ω –±–æ–∑–æ—Ä–∏–¥–∞–≥–∏ —ç–Ω–≥ —è—Ö—à–∏ –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏—è –∏–º–∫–æ–Ω–∏—è—Ç–ª–∞—Ä–∏–Ω–∏ —Ç–æ–ø–∏—à–¥–∞ —ë—Ä–¥–∞–º –±–µ—Ä–∞–º–∞–Ω.
"""
    },
    "welcome_back_uznetix": {
        "latin": """Xush kelibsiz, {user_name}!

Uznetix Advisor sizni eslayapti. Yangi investitsiya tahlili olishni xohlaysizmi?""",
        "cyrillic": """–•—É—à –∫–µ–ª–∏–±—Å–∏–∑, {user_name}!

Uznetix Advisor —Å–∏–∑–Ω–∏ —ç—Å–ª–∞—è–ø—Ç–∏. –Ø–Ω–≥–∏ –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏—è —Ç–∞“≥–ª–∏–ª–∏ –æ–ª–∏—à–Ω–∏ —Ö–æ“≥–ª–∞–π—Å–∏–∑–º–∏?"""
    },
    "verification_success_uznetix": {
        "latin": """‚úÖ Uznetix mijozingiz tasdiqlandi!

Endi to'liq funksiyalardan foydalanishingiz mumkin. Keling, shaxsiy investitsiya profilingizni yaratamiz!""",
        "cyrillic": """‚úÖ Uznetix –º–∏–∂–æ–∑–∏–Ω–≥–∏–∑ —Ç–∞—Å–¥–∏“õ–ª–∞–Ω–¥–∏!

–≠–Ω–¥–∏ —Ç—û–ª–∏“õ —Ñ—É–Ω–∫—Ü–∏—è–ª–∞—Ä–¥–∞–Ω —Ñ–æ–π–¥–∞–ª–∞–Ω–∏—à–∏–Ω–≥–∏–∑ –º—É–º–∫–∏–Ω. –ö–µ–ª–∏–Ω–≥, —à–∞—Ö—Å–∏–π –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏—è –ø—Ä–æ—Ñ–∏–ª–∏–Ω–≥–∏–∑–Ω–∏ —è—Ä–∞—Ç–∞–º–∏–∑!"""
    },
    "interview_start_uznetix": {
        "latin": """üéØ Uznetix Advisor suhbati boshlandi!

Sizning maqsadlaringiz, byudjetingiz va risk darajangizni aniqlash uchun bir nechta savol beraman. Javoblaringiz asosida eng mos aksiya va ETF tavsiyalarini beraman.""",
        "cyrillic": """üéØ Uznetix Advisor —Å—É“≥–±–∞—Ç–∏ –±–æ—à–ª–∞–Ω–¥–∏!

–°–∏–∑–Ω–∏–Ω–≥ –º–∞“õ—Å–∞–¥–ª–∞—Ä–∏–Ω–≥–∏–∑, –±—é–¥–∂–µ—Ç–∏–Ω–≥–∏–∑ –≤–∞ —Ä–∏—Å–∫ –¥–∞—Ä–∞–∂–∞–Ω–≥–∏–∑–Ω–∏ –∞–Ω–∏“õ–ª–∞—à —É—á—É–Ω –±–∏—Ä –Ω–µ—á—Ç–∞ —Å–∞–≤–æ–ª –±–µ—Ä–∞–º–∞–Ω. –ñ–∞–≤–æ–±–ª–∞—Ä–∏–Ω–≥–∏–∑ –∞—Å–æ—Å–∏–¥–∞ —ç–Ω–≥ –º–æ—Å –∞–∫—Ü–∏—è –≤–∞ ETF —Ç–∞–≤—Å–∏—è–ª–∞—Ä–∏–Ω–∏ –±–µ—Ä–∞–º–∞–Ω."""
    },
    "interview_response_prefix": {
        "latin": "Tushundim! Keyingi savol:",
        "cyrillic": "–¢—É—à—É–Ω–¥–∏–º! –ö–µ–π–∏–Ω–≥–∏ —Å–∞–≤–æ–ª:"
    },
    "interview_complete_uznetix": {
        "latin": """‚úÖ Suhbat yakunlandi! Rahmat ishtirokingiz uchun.

Endi sizning profilingizga mos Uznetix bo'yicha eng yaxshi investitsiya g'oyalarini tayyorlayapman...""",
        "cyrillic": """‚úÖ –°—É“≥–±–∞—Ç —è“õ—É–Ω–ª–∞–Ω–¥–∏! –†–∞“≥–º–∞—Ç –∏—à—Ç–∏—Ä–æ–∫–∏–Ω–≥–∏–∑ —É—á—É–Ω.

–≠–Ω–¥–∏ —Å–∏–∑–Ω–∏–Ω–≥ –ø—Ä–æ—Ñ–∏–ª–∏–Ω–≥–∏–∑–≥–∞ –º–æ—Å Uznetix –±—û–π–∏—á–∞ —ç–Ω–≥ —è—Ö—à–∏ –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏—è “ì–æ—è–ª–∞—Ä–∏–Ω–∏ —Ç–∞–π—ë—Ä–ª–∞—è–ø–º–∞–Ω..."""
    },
    "interview_cancelled_uznetix": {
        "latin": """‚ùå Suhbat bekor qilindi.

Uznetix Advisor asosiy menyusiga qaytdingiz. Har qanday vaqtda yangi suhbat boshlashingiz mumkin!""",
        "cyrillic": """‚ùå –°—É“≥–±–∞—Ç –±–µ–∫–æ—Ä “õ–∏–ª–∏–Ω–¥–∏.

Uznetix Advisor –∞—Å–æ—Å–∏–π –º–µ–Ω—é—Å–∏–≥–∞ “õ–∞–π—Ç–¥–∏–Ω–≥–∏–∑. “≤–∞—Ä “õ–∞–Ω–¥–∞–π –≤–∞“õ—Ç–¥–∞ —è–Ω–≥–∏ —Å—É“≥–±–∞—Ç –±–æ—à–ª–∞—à–∏–Ω–≥–∏–∑ –º—É–º–∫–∏–Ω!"""
    },
    "clarification_start": {
        "latin": "Iltimos, 'boshladik' yoki 'boshlash' deb yozing.",
        "cyrillic": "–ò–ª—Ç–∏–º–æ—Å, '–±–æ—à–ª–∞–¥–∏–∫' —ë–∫–∏ '–±–æ—à–ª–∞—à' –¥–µ–± —ë–∑–∏–Ω–≥."
    },
    
    "welcome_back": {
        "latin": """Xush kelibsiz{user_name}! 

Men sizni eslayapman. Yangi investitsiya tavsiyasi olmoqchimisiz?""",
        "cyrillic": """–•—É—à –∫–µ–ª–∏–±—Å–∏–∑{user_name}!

–ú–µ–Ω —Å–∏–∑–Ω–∏ —ç—Å–ª–∞—è–ø–º–∞–Ω. –Ø–Ω–≥–∏ –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏—è —Ç–∞–≤—Å–∏—è—Å–∏ –æ–ª–º–æ“õ—á–∏–º–∏—Å–∏–∑?"""
    },
    
    "disclaimer": {
        "latin": """‚ö†Ô∏è MUHIM:
Bu tavsiyalar faqat ma'lumot uchun. Men moliyaviy maslahatchi emasman. Har qanday investitsiya o'zingiz mas'uliyatida!""",
        "cyrillic": """‚ö†Ô∏è –ú–£“≤–ò–ú:
–ë—É —Ç–∞–≤—Å–∏—è–ª–∞—Ä —Ñ–∞“õ–∞—Ç –º–∞—ä–ª—É–º–æ—Ç —É—á—É–Ω. –ú–µ–Ω –º–æ–ª–∏—è–≤–∏–π –º–∞—Å–ª–∞“≥–∞—Ç—á–∏ —ç–º–∞—Å–º–∞–Ω. “≤–∞—Ä “õ–∞–Ω–¥–∞–π –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏—è —û–∑–∏–Ω–≥–∏–∑ –º–∞—Å—ä—É–ª–∏—è—Ç–∏–¥–∞!"""
    },
    
    "verification_prompt": {
        "latin": """‚úâÔ∏è Uznetix mijozi ekanligingizni tasdiqlash uchun GetCourse'dagi emailingizni yuboring.

Masalan: example@gmail.com""",
        "cyrillic": """‚úâÔ∏è Uznetix –º–∏–∂–æ–∑–∏ —ç–∫–∞–Ω–ª–∏–≥–∏–Ω–≥–∏–∑–Ω–∏ —Ç–∞—Å–¥–∏“õ–ª–∞—à —É—á—É–Ω GetCourse'–¥–∞–≥–∏ email–∏–Ω–≥–∏–∑–Ω–∏ —é–±–æ—Ä–∏–Ω–≥.

–ú–∞—Å–∞–ª–∞–Ω: example@gmail.com"""
    },
    
    "checking_access": {
        "latin": "‚è≥ Tekshiryapman...",
        "cyrillic": "‚è≥ –¢–µ–∫—à–∏—Ä–∞—è–ø–º–∞–Ω..."
    },
    
    "verification_success": {
        "latin": """‚úÖ Tasdiqlandi!

Endi siz botdan foydalanishingiz mumkin. Keling, investitsiya rejangizni tuzamiz!""",
        "cyrillic": """‚úÖ –¢–∞—Å–¥–∏“õ–ª–∞–Ω–¥–∏!

–≠–Ω–¥–∏ —Å–∏–∑ –±–æ—Ç–¥–∞–Ω —Ñ–æ–π–¥–∞–ª–∞–Ω–∏—à–∏–Ω–≥–∏–∑ –º—É–º–∫–∏–Ω. –ö–µ–ª–∏–Ω–≥, –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏—è —Ä–µ–∂–∞–Ω–≥–∏–∑–Ω–∏ —Ç—É–∑–∞–º–∏–∑!"""
    },
    
    "verification_failed": {
        "latin": """‚ùå Kechirasiz, sizni Uznetix mijozi sifatida topa olmadim.

Iltimos, to'g'ri emailni kiriting yoki Uznetix.com saytidan kursga yoziling.""",
        "cyrillic": """‚ùå –ö–µ—á–∏—Ä–∞—Å–∏–∑, —Å–∏–∑–Ω–∏ Uznetix –º–∏–∂–æ–∑–∏ —Å–∏—Ñ–∞—Ç–∏–¥–∞ —Ç–æ–ø–∞ –æ–ª–º–∞–¥–∏–º.

–ò–ª—Ç–∏–º–æ—Å, —Ç—û“ì—Ä–∏ email–Ω–∏ –∫–∏—Ä–∏—Ç–∏–Ω–≥ —ë–∫–∏ Uznetix.com —Å–∞–π—Ç–∏–¥–∞–Ω –∫—É—Ä—Å–≥–∞ —ë–∑–∏–ª–∏–Ω–≥."""
    },
    
    "verification_required": {
        "latin": "Botdan foydalanish uchun tasdiqlash majburiy!",
        "cyrillic": "–ë–æ—Ç–¥–∞–Ω —Ñ–æ–π–¥–∞–ª–∞–Ω–∏—à —É—á—É–Ω —Ç–∞—Å–¥–∏“õ–ª–∞—à –º–∞–∂–±—É—Ä–∏–π!"
    },
    
    "invalid_email": {
        "latin": "‚ùå Email noto'g'ri ko'rinadi. Qaytadan kiriting.",
        "cyrillic": "‚ùå Email –Ω–æ—Ç—û“ì—Ä–∏ –∫—û—Ä–∏–Ω–∞–¥–∏. “ö–∞–π—Ç–∞–¥–∞–Ω –∫–∏—Ä–∏—Ç–∏–Ω–≥."
    },
    
    "interview_start": {
        "latin": """üéØ Ajoyib! Men sizga eng mos investitsiya g'oyalarini topish uchun bir nechta savol beraman.

Savollarga oddiy, o'z so'zlaringiz bilan javob bering. Bu 2-3 daqiqa oladi.

Birinchi savol:""",
        "cyrillic": """üéØ –ê–∂–æ–π–∏–±! –ú–µ–Ω —Å–∏–∑–≥–∞ —ç–Ω–≥ –º–æ—Å –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏—è “ì–æ—è–ª–∞—Ä–∏–Ω–∏ —Ç–æ–ø–∏—à —É—á—É–Ω –±–∏—Ä –Ω–µ—á—Ç–∞ —Å–∞–≤–æ–ª –±–µ—Ä–∞–º–∞–Ω.

–°–∞–≤–æ–ª–ª–∞—Ä–≥–∞ –æ–¥–¥–∏–π, —û–∑ —Å—û–∑–ª–∞—Ä–∏–Ω–≥–∏–∑ –±–∏–ª–∞–Ω –∂–∞–≤–æ–± –±–µ—Ä–∏–Ω–≥. –ë—É 2-3 –¥–∞“õ–∏“õ–∞ –æ–ª–∞–¥–∏.

–ë–∏—Ä–∏–Ω—á–∏ —Å–∞–≤–æ–ª:"""
    },
    
    "interview_complete": {
        "latin": "‚úÖ Rahmat! Endi sizga tavsiya tayyorlayapman...",
        "cyrillic": "‚úÖ –†–∞“≥–º–∞—Ç! –≠–Ω–¥–∏ —Å–∏–∑–≥–∞ —Ç–∞–≤—Å–∏—è —Ç–∞–π—ë—Ä–ª–∞—è–ø–º–∞–Ω..."
    },
    
    "generating_recommendation": {
        "latin": "ü§î Sizning profilingizga mos tavsiyalar qidiryapman...",
        "cyrillic": "ü§î –°–∏–∑–Ω–∏–Ω–≥ –ø—Ä–æ—Ñ–∏–ª–∏–Ω–≥–∏–∑–≥–∞ –º–æ—Å —Ç–∞–≤—Å–∏—è–ª–∞—Ä “õ–∏–¥–∏—Ä–∞—è–ø–º–∞–Ω..."
    },
    
    "recommendation_reminder": {
        "latin": """üí° Eslatma:
‚Ä¢ Bu shaxsiy tavsiya emas, umumiy yo'nalish
‚Ä¢ Har qanday investitsiya xavfli
‚Ä¢ Moliyaviy maslahatchi bilan maslahatlashing
‚Ä¢ Maqsadlaringiz o'zgarganda qaytib keling""",
        "cyrillic": """üí° –≠—Å–ª–∞—Ç–º–∞:
‚Ä¢ –ë—É —à–∞—Ö—Å–∏–π —Ç–∞–≤—Å–∏—è —ç–º–∞—Å, —É–º—É–º–∏–π –π—û–Ω–∞–ª–∏—à
‚Ä¢ “≤–∞—Ä “õ–∞–Ω–¥–∞–π –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏—è —Ö–∞–≤—Ñ–ª–∏
‚Ä¢ –ú–æ–ª–∏—è–≤–∏–π –º–∞—Å–ª–∞“≥–∞—Ç—á–∏ –±–∏–ª–∞–Ω –º–∞—Å–ª–∞“≥–∞—Ç–ª–∞—à–∏–Ω–≥
‚Ä¢ –ú–∞“õ—Å–∞–¥–ª–∞—Ä–∏–Ω–≥–∏–∑ —û–∑–≥–∞—Ä–≥–∞–Ω–¥–∞ “õ–∞–π—Ç–∏–± –∫–µ–ª–∏–Ω–≥"""
    },
    
    "interview_cancelled": {
        "latin": "‚ùå So'rovnoma bekor qilindi. Asosiy menyuga qaytdingiz.",
        "cyrillic": "‚ùå –°—û—Ä–æ–≤–Ω–æ–º–∞ –±–µ–∫–æ—Ä “õ–∏–ª–∏–Ω–¥–∏. –ê—Å–æ—Å–∏–π –º–µ–Ω—é–≥–∞ “õ–∞–π—Ç–¥–∏–Ω–≥–∏–∑."
    },
    
    "error_general": {
        "latin": "‚ùå Xatolik yuz berdi. Iltimos, qaytadan urinib ko'ring.",
        "cyrillic": "‚ùå –•–∞—Ç–æ–ª–∏–∫ —é–∑ –±–µ—Ä–¥–∏. –ò–ª—Ç–∏–º–æ—Å, “õ–∞–π—Ç–∞–¥–∞–Ω —É—Ä–∏–Ω–∏–± –∫—û—Ä–∏–Ω–≥."
    },
    
    "error_session_expired": {
        "latin": "‚ùå Sessiya tugadi. Iltimos, qaytadan boshlang.",
        "cyrillic": "‚ùå –°–µ—Å—Å–∏—è —Ç—É–≥–∞–¥–∏. –ò–ª—Ç–∏–º–æ—Å, “õ–∞–π—Ç–∞–¥–∞–Ω –±–æ—à–ª–∞–Ω–≥."
    },
    
    "error_recommendation": {
        "latin": "‚ùå Tavsiya tayyorlashda xatolik. Iltimos, qaytadan urinib ko'ring.",
        "cyrillic": "‚ùå –¢–∞–≤—Å–∏—è —Ç–∞–π—ë—Ä–ª–∞—à–¥–∞ —Ö–∞—Ç–æ–ª–∏–∫. –ò–ª—Ç–∏–º–æ—Å, “õ–∞–π—Ç–∞–¥–∞–Ω —É—Ä–∏–Ω–∏–± –∫—û—Ä–∏–Ω–≥."
    },
    
    "button_start": {
        "latin": "üöÄ Boshlash",
        "cyrillic": "üöÄ –ë–æ—à–ª–∞—à"
    },
    
    "button_new_interview": {
        "latin": "üìù Yangi tavsiya",
        "cyrillic": "üìù –Ø–Ω–≥–∏ —Ç–∞–≤—Å–∏—è"
    },
    
    "button_new_interview_uznetix": {
        "latin": "üìä Uznetix tahlili olish",
        "cyrillic": "üìä Uznetix —Ç–∞“≥–ª–∏–ª–∏ –æ–ª–∏—à"
    },
    
    "button_cancel": {
        "latin": "‚ùå Bekor qilish",
        "cyrillic": "‚ùå –ë–µ–∫–æ—Ä “õ–∏–ª–∏—à"
    },
    
    "button_skip": {
        "latin": "‚è≠ O'tkazib yuborish",
        "cyrillic": "‚è≠ –é—Ç–∫–∞–∑–∏–± —é–±–æ—Ä–∏—à"
    },
    "interview_start": {
        "latin": "üéØ Investitsiya intervyusi boshlanmoqda...\n\nMen sizga eng mos investitsiya variantlarini topishda yordam beraman. Bir necha savol beraman.",
        "cyrillic": "üéØ –ò–Ω–≤–µ—Å—Ç–∏—Ü–∏—è –∏–Ω—Ç–µ—Ä–≤—é—Å–∏ –±–æ—à–ª–∞–Ω–º–æ“õ–¥–∞...\n\n–ú–µ–Ω —Å–∏–∑–≥–∞ —ç–Ω–≥ –º–æ—Å –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏—è –≤–∞—Ä–∏–∞–Ω—Ç–ª–∞—Ä–∏–Ω–∏ —Ç–æ–ø–∏—à–¥–∞ —ë—Ä–¥–∞–º –±–µ—Ä–∞–º–∞–Ω. –ë–∏—Ä –Ω–µ—á–∞ —Å–∞–≤–æ–ª –±–µ—Ä–∞–º–∞–Ω."
    },
    
    "generating_recommendation": {
        "latin": "‚è≥ Tavsiya tayyorlanmoqda...\n\nBir oz kuting, sizning ma'lumotlaringiz asosida eng yaxshi variantlarni tanlayman.",
        "cyrillic": "‚è≥ –¢–∞–≤—Å–∏—è —Ç–∞–π—ë—Ä–ª–∞–Ω–º–æ“õ–¥–∞...\n\n–ë–∏—Ä –æ–∑ –∫—É—Ç–∏–Ω–≥, —Å–∏–∑–Ω–∏–Ω–≥ –º–∞—ä–ª—É–º–æ—Ç–ª–∞—Ä–∏–Ω–≥–∏–∑ –∞—Å–æ—Å–∏–¥–∞ —ç–Ω–≥ —è—Ö—à–∏ –≤–∞—Ä–∏–∞–Ω—Ç–ª–∞—Ä–Ω–∏ —Ç–∞–Ω–ª–∞–π–º–∞–Ω."
    },
    
    "interview_complete": {
        "latin": "‚úÖ Intervyu tugadi!\n\nYana yangi tavsiya olmoqchi bo'lsangiz, quyidagi tugmani bosing.",
        "cyrillic": "‚úÖ –ò–Ω—Ç–µ—Ä–≤—å—é —Ç—É–≥–∞–¥–∏!\n\n–Ø–Ω–∞ —è–Ω–≥–∏ —Ç–∞–≤—Å–∏—è –æ–ª–º–æ“õ—á–∏ –±—û–ª—Å–∞–Ω–≥–∏–∑, “õ—É–π–∏–¥–∞–≥–∏ —Ç—É–≥–º–∞–Ω–∏ –±–æ—Å–∏–Ω–≥."
    },
    
    "error_generating_recommendation": {
        "latin": "‚ùå Tavsiya yaratishda xatolik yuz berdi. Iltimos, qaytadan urinib ko'ring.",
        "cyrillic": "‚ùå –¢–∞–≤—Å–∏—è —è—Ä–∞—Ç–∏—à–¥–∞ —Ö–∞—Ç–æ–ª–∏–∫ —é–∑ –±–µ—Ä–¥–∏. –ò–ª—Ç–∏–º–æ—Å, “õ–∞–π—Ç–∞–¥–∞–Ω —É—Ä–∏–Ω–∏–± –∫—û—Ä–∏–Ω–≥."
    },
    
    "verification_required": {
        "latin": "‚õîÔ∏è Ushbu funksiyadan foydalanish uchun avval ro'yxatdan o'tishingiz kerak.",
        "cyrillic": "‚õîÔ∏è –£—à–±—É —Ñ—É–Ω–∫—Ü–∏—è–¥–∞–Ω —Ñ–æ–π–¥–∞–ª–∞–Ω–∏—à —É—á—É–Ω –∞–≤–≤–∞–ª —Ä—û–π—Ö–∞—Ç–¥–∞–Ω —û—Ç–∏—à–∏–Ω–≥–∏–∑ –∫–µ—Ä–∞–∫."
    },
    "continue_chat_offer": {
        "latin": "üí¨ Aksiyalar va investitsiyalar bo'yicha savollaringiz bormi?\n\nMen Uznetix Advisor sifatida sizga yordam berishga tayyorman!",
        "cyrillic": "üí¨ –ê–∫—Ü–∏—è–ª–∞—Ä –≤–∞ –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏—è–ª–∞—Ä –±—û–π–∏—á–∞ —Å–∞–≤–æ–ª–ª–∞—Ä–∏–Ω–≥–∏–∑ –±–æ—Ä–º–∏?\n\n–ú–µ–Ω Uznetix Advisor —Å–∏—Ñ–∞—Ç–∏–¥–∞ —Å–∏–∑–≥–∞ —ë—Ä–¥–∞–º –±–µ—Ä–∏—à–≥–∞ —Ç–∞–π—ë—Ä–º–∞–Ω!"
    },
    
    "chat_ready": {
        "latin": "‚úÖ Tayyor! Aksiyalar, portfel, yoki investitsiyalar haqida savol bering.\n\nMasalan: \"Tesla aksiyasi haqida nima deyish mumkin?\" yoki \"Qaysi aksiya yaxshiroq?\"",
        "cyrillic": "‚úÖ –¢–∞–π—ë—Ä! –ê–∫—Ü–∏—è–ª–∞—Ä, –ø–æ—Ä—Ç—Ñ–µ–ª—å, —ë–∫–∏ –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏—è–ª–∞—Ä “≥–∞“õ–∏–¥–∞ —Å–∞–≤–æ–ª –±–µ—Ä–∏–Ω–≥.\n\n–ú–∞—Å–∞–ª–∞–Ω: \"Tesla –∞–∫—Ü–∏—è—Å–∏ “≥–∞“õ–∏–¥–∞ –Ω–∏–º–∞ –¥–µ–π–∏—à –º—É–º–∫–∏–Ω?\" —ë–∫–∏ \"“ö–∞–π—Å–∏ –∞–∫—Ü–∏—è —è—Ö—à–∏—Ä–æ“õ?\""
    },
    
    "back_to_menu_text": {
        "latin": "üè† Asosiy menyuga qaytdingiz.",
        "cyrillic": "üè† –ê—Å–æ—Å–∏–π –º–µ–Ω—é–≥–∞ “õ–∞–π—Ç–¥–∏–Ω–≥–∏–∑."
    },
    
    "main_menu_text": {
        "latin": "üè† Asosiy menyu",
        "cyrillic": "üè† –ê—Å–æ—Å–∏–π –º–µ–Ω—é"
    },
    
    "button_continue_chat": {
        "latin": "üí¨ Davom etish (savol berish)",
        "cyrillic": "üí¨ –î–∞–≤–æ–º —ç—Ç–∏—à (—Å–∞–≤–æ–ª –±–µ—Ä–∏—à)"
    },
    
    "button_back_to_menu": {
        "latin": "üè† Asosiy menyuga qaytish",
        "cyrillic": "üè† –ê—Å–æ—Å–∏–π –º–µ–Ω—é–≥–∞ “õ–∞–π—Ç–∏—à"
    },
    
    "button_new_interview_uznetix": {
        "latin": "üéØ Yangi investitsiya tavsiyasi olish",
        "cyrillic": "üéØ –Ø–Ω–≥–∏ –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏—è —Ç–∞–≤—Å–∏—è—Å–∏ –æ–ª–∏—à"
    },
    
    "error_generating_recommendation": {
        "latin": "‚ùå Tavsiya yaratishda xatolik yuz berdi. Iltimos, qaytadan urinib ko'ring.",
        "cyrillic": "‚ùå –¢–∞–≤—Å–∏—è —è—Ä–∞—Ç–∏—à–¥–∞ —Ö–∞—Ç–æ–ª–∏–∫ —é–∑ –±–µ—Ä–¥–∏. –ò–ª—Ç–∏–º–æ—Å, “õ–∞–π—Ç–∞–¥–∞–Ω —É—Ä–∏–Ω–∏–± –∫—û—Ä–∏–Ω–≥."
    },
    
    "verification_required": {
        "latin": "‚õîÔ∏è Ushbu funksiyadan foydalanish uchun avval ro'yxatdan o'tishingiz kerak.",
        "cyrillic": "‚õîÔ∏è –£—à–±—É —Ñ—É–Ω–∫—Ü–∏—è–¥–∞–Ω —Ñ–æ–π–¥–∞–ª–∞–Ω–∏—à —É—á—É–Ω –∞–≤–≤–∞–ª —Ä—û–π—Ö–∞—Ç–¥–∞–Ω —û—Ç–∏—à–∏–Ω–≥–∏–∑ –∫–µ—Ä–∞–∫."
    },
    
    "error_general": {
        "latin": "‚ùå Xatolik yuz berdi. Iltimos, qaytadan urinib ko'ring yoki /start buyrug'ini yuboring.",
        "cyrillic": "‚ùå –•–∞—Ç–æ–ª–∏–∫ —é–∑ –±–µ—Ä–¥–∏. –ò–ª—Ç–∏–º–æ—Å, “õ–∞–π—Ç–∞–¥–∞–Ω —É—Ä–∏–Ω–∏–± –∫—û—Ä–∏–Ω–≥ —ë–∫–∏ /start –±—É–π—Ä—É“ì–∏–Ω–∏ —é–±–æ—Ä–∏–Ω–≥."
    }

}


def get_text(key: str, script: str = "latin", **kwargs) -> str:
    """
    Get text in specified script with optional formatting
    
    Args:
        key: Text key
        script: 'latin' or 'cyrillic'
        **kwargs: Format arguments
    
    Returns:
        Formatted text string
    """
    if key not in TEXTS:
        return f"Text not found: {key}"
    
    text = TEXTS[key].get(script, TEXTS[key].get("latin", ""))
    
    # Format user_name specially
    if "user_name" in kwargs:
        user_name = kwargs["user_name"]
        if user_name:
            kwargs["user_name"] = f" {user_name}"
        else:
            kwargs["user_name"] = ""
    
    try:
        return text.format(**kwargs)
    except KeyError:
        return text